<div class="modal-overlay">
  <div class="modal-container">
    <div class="calendar-create-wrapper">
      <form (ngSubmit)="onSubmit()">
        <h2>Creazione {{ type }}</h2>

        <div class="form-grid">
          <div>
            <label>Tipo *</label>
            <select [(ngModel)]="type" name="type">
              <option disabled selected value=""> -- Seleziona un tipo -- </option>
              <option value="evento">Evento</option>
              <option value="attivita">Attivit√†</option>
            </select>
          </div>

          <div>
            <label>Titolo *</label>
            <input [(ngModel)]="title" name="title" required />
          </div>

          <div>
            <label>Luogo</label>
            <input [(ngModel)]="location" name="location" />
          </div>

          <div class="row-group">
            <div>
              <label>Data e Ora inizio *</label>
              <input type="datetime-local" [(ngModel)]="dataOraInizio" name="dataOraInizio" required />
            </div>
            <div>
              <label>Data e Ora fine</label>
              <input type="datetime-local" [(ngModel)]="dataOraFine" name="dataOraFine" />
            </div>
          </div>
          <div *ngIf="erroreData" class="error-msg">
            La data di inizio deve essere precedente a quella di fine.
          </div>

          <div class="checkbox-row">
            <input type="checkbox" [(ngModel)]="isRecurring" name="isRecurring" />
            <label for="isRecurring">Evento ricorrente</label>
          </div>

          <div *ngIf="isRecurring" class="giorni-frequenza">
            <label>Giorni della settimana:</label>
            <div class="checkbox-giorni">
              <label *ngFor="let giorno of giorniSettimana">
                <input type="checkbox" [(ngModel)]="giorniSelezionati[giorno]" name="{{giorno}}" />
                {{ giorno }}
              </label>
            </div>
          </div>

          <div *ngIf="isRecurring" class="row-group">
            <div>
              <label>Tipo di ripetizione *</label>
              <select [(ngModel)]="tipoRipetizione" name="tipoRipetizione">
                <option value="nulla"> Non ripetibile </option>
                <option value="numeroFisso">Numero fisso</option>
                <option value="scadenza">Data Scadenza</option>
              </select>
            </div>
            <div *ngIf="tipoRipetizione == 'numeroFisso'">
              <label>Numero ripetizioni</label>
              <input type="number" min="1" [(ngModel)]="ripetizioni" name="ripetizioni" />
            </div>
            <div *ngIf="tipoRipetizione == 'scadenza'">
              <label>Data scadenza</label>
              <input type="date" [(ngModel)]="fineRicorrenza" name="fineRicorrenza" />
            </div>

          </div>

        </div>

        <div class="button-row">
          <button type="submit"><i class="far fa-save"></i> Salva</button>
        </div>
      </form>
    </div>
  </div>
</div>